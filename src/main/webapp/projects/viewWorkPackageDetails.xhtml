<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
		"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:pt="http://xmlns.jcp.org/jsf/passthrough">

<h:head>
	<title></title>
	<h:outputStylesheet library="css" name="reset.css" />
	<h:outputStylesheet library="css" name="template.css" />
</h:head>

<h:body>
	<f:metadata>
		<f:event type="preRenderView"
			listener="#{userController.checkAuthorization}" />
		<f:attribute name="requiredRoles" value="Supervisor,Project Manager,Project Assistant" />
	</f:metadata>

	<ui:composition template="/templatesBootstrap/masterLayout.xhtml">
		<ui:define name="windowTitle">#{msgs.employees}</ui:define>
		<ui:define name="additionalStyleSheets">
			<h:outputStylesheet library="css" name="project.css" />
		</ui:define>
		<ui:define name="content">
			<div id="content">
				<div class="col-xs-12 col-sm-12 colmd-12">


					<div class="row">
						<div class="col-xs-12 col-sm-12 col-md-12">

							<div id="breadcrumb">
								<h:form>
									<ol class="breadcrumb">
										<li><h:commandLink action="mypage" value="#{msgs.myPage}" /></li>
										<li class="active">#{msgs.viewPackageDetails}</li>
									</ol>
								</h:form>
							</div>

							<div id="pageTitle">
								<h1>#{msgs.viewPackageDetails}</h1>
							</div>
							<ui:insert name="notificationArea">
								<ui:include src="/templatesBootstrap/notificationArea.xhtml" />
							</ui:insert>
						</div>
					</div>

					<div class="row">
						<div class="col-xs-12 col-sm-12 col-md-6 ">
							<h:form id="workPackageForm" styleClass="form-inline">
				
							<h:inputHidden  value="#{workPackageController.workPackage.id}" />

								<dl class="dl-horizontal">
									<dt>#{msgs.workPackageNumber}</dt>
									<dd>#{workPackageController.workPackage.packageNum}</dd>

									<dt>#{msgs.projectNumber}</dt>
									<dd>#{workPackageController.workPackage.project.id}</dd>

									<dt>#{msgs.packageManager}</dt>
									<dd>#{workPackageController.workPackage.employeeID}</dd>

									<dt>#{msgs.parentWpId}</dt>
									<dd>#{workPackageController.workPackage.parentWP.packageNum}</dd>

									<dt>#{msgs.workPackageDescription}</dt>
									<dd>#{workPackageController.workPackage.description}</dd>

									<dt>#{msgs.status}</dt>
									<dd>#{workPackageController.workPackage.status}</dd>

								</dl>
							</h:form>
						</div>
							
							
					<h:panelGroup rendered="#{workPackageController.workPackage.leaf}">

						<div class="col-md-6">
							<div class="panel panel-default">
								<div class="panel-body">


									<div class="form-group">
										<h:outputLabel value="#{msgs.workPackageBudget}"
													   class="col-sm-2 control-label" />
										<div class="col-sm-2">
											<h:outputLabel value="#{msgs.p1}" />
											<h:outputText pt:placeholder="P1"  id="P1"
														  value="#{workPackageController.workPackage.budget.p1}"
														  required="true" label="#{msgs.p1}" class="form-control" />
											<h:message errorClass="text-danger" for="P1" />
										</div>
										<div class="col-sm-2">
											<h:outputLabel value="#{msgs.p2}" />

											<h:outputText pt:placeholder="P2"  id="P2"
														  value="#{workPackageController.workPackage.budget.p2}"
														  required="true" label="#{msgs.p2}" class="form-control" />
											<h:message errorClass="text-danger" for="P2" />
										</div>

										<div class="col-sm-2">
											<h:outputLabel value="#{msgs.p3}" />

											<h:outputText pt:placeholder="P3"  id="P3"
														  value="#{workPackageController.workPackage.budget.p3}"
														  required="true" label="#{msgs.p3}" class="form-control" />
											<h:message errorClass="text-danger" for="P3" />
										</div>

										<div class="col-sm-2">
											<h:outputLabel value="#{msgs.p4}" />

											<h:outputText pt:placeholder="P4"  id="P4"
														  value="#{workPackageController.workPackage.budget.p4}"
														  required="true" label="#{msgs.p4}" class="form-control" />
											<h:message errorClass="text-danger" for="P4" />
										</div>
									</div>

									<div class="form-group">

										<div class="col-sm-2 col-sm-offset-2">
											<h:outputLabel value="#{msgs.p5}" />

											<h:outputText pt:placeholder="P5"  id="P5"
														  value="#{workPackageController.workPackage.budget.p5}"
														  required="true" label="#{msgs.p5}" class="form-control" />
											<h:message errorClass="text-danger" for="P5" />
										</div>
										<div class="col-sm-2">
											<h:outputLabel value="#{msgs.ss}" />

											<h:outputText pt:placeholder="SS"  id="SS"
														  value="#{workPackageController.workPackage.budget.SS}"
														  required="true" label="#{msgs.ss}" class="form-control" />
											<h:message errorClass="text-danger" for="SS" />
										</div>

										<div class="col-sm-2">
											<h:outputLabel value="#{msgs.js}" />

											<h:outputText pt:placeholder="JS"  id="JS"
														  value="#{workPackageController.workPackage.budget.JS}"
														  required="true" label="#{msgs.js}" class="form-control" />
											<h:message errorClass="text-danger" for="JS" />
										</div>

										<div class="col-sm-2">
											<h:outputLabel value="#{msgs.ds}" />

											<h:outputText pt:placeholder="DS"  id="DS"
														  value="#{workPackageController.workPackage.budget.DS}"
														  required="true" label="#{msgs.ds}" class="form-control" />
											<h:message errorClass="text-danger" for="DS" />
										</div>
									</div>
								</div>
							</div>
						</div>
						</h:panelGroup>
					</div>
					<div class="row">
						<h:form>
						<div class="col-xs-12 col-sm-12 col-md-6 ">
							<div class="panel panel-default">
								<div class="panel-heading"><strong>#{msgs.childWorkPackage}</strong></div>
								<div class="panel-body">
									<!-- controll buttons -->
									<ui:fragment rendered="#{userController.isAuthorized('Project Manager,Project Assistant')}">
										<h:commandButton value="#{msgs.createChildPackage}"
														 styleClass="btn btn-primary"
														 action="#{workPackageController.goChildPackage(workPackageController.workPackage)}" />
									</ui:fragment>
								</div>
								<ul class="list-group">
									<ui:repeat var="package" value="#{workPackageController.childWorkPackages}">
										<li class="list-group-item">
											<h:commandLink value="#{package.name} (#{package.packageNum})"
														   action="#{workPackageController.viewWorkPackageDetails(package)}" />
										</li>
									</ui:repeat>
								</ul>
							</div>
						</div>
						</h:form>
					</div>

						<div class="row">
							<div class="col-xs-12 col-sm-12">
								<h:form id="linkForm">
									<h:inputHidden binding="#{packageID}"  value="#{workPackageController.workPackage.id}" />
	
									<div class="button-groups">
									<ui:fragment rendered="#{userController.isAuthorized('Project Manager,Project Assistant,Responsible Engineer')}">
										<h:commandButton value="#{msgs.edit_emp}"
												   styleClass="btn btn-primary"
												   action="#{workPackageController.goEditPackage(packageID.value)}" />
									</ui:fragment>
									</div>
								</h:form>
							</div>
						</div>
				</div>
			</div>
		</ui:define>
	</ui:composition>
</h:body>
<!-- end of body -->
</html>