<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:p="http://primefaces.org/ui">

<h:head>
	<title></title>
</h:head>
<h:body>
	<ui:composition template="/templatesBootstrap/masterLayout.xhtml">

		<ui:define name="windowTitle">#{msgs.timesheet}</ui:define>

		<ui:define name="additionalStyleSheets">
			<h:outputStylesheet library="css" name="timesheet.css" />
		</ui:define>

		<ui:define name="content">
			<!-- change the value if using left menu -->
			<div class="col-md-12">

				<div class="container-fluid" id="content">

					<div class="row">
						<div class="col-xs-12 col-sm-12 col-md-12">

							<div id="breadcrumb">
								<h:form>
									<ol class="breadcrumb">
										<li><h:commandLink action="mypage" value="#{msgs.myPage}" /></li>
										<li class="active">#{msgs.timesheet}</li>
									</ol>
								</h:form>
							</div>

							<div id="pageTitle">

								<h1>#{msgs.timesheet}</h1>

							</div>
							<ui:insert name="notificationArea">
								<ui:include src="/templatesBootstrap/notificationArea.xhtml" />
							</ui:insert>
						</div>
					</div>

					<div class="row">

						<div class="col-xs-12 col-sm-12 col-md-12">

							<div class="container-flid">
								<h:form id="timesheetForm">
									<div class="row">
										<div id="formTitle" class="panel panel-default col-md-7">
											<div class="panel-heading">#{msgs.current}
												#{msgs.timesheet} #{msgs.data}</div>
											<div class="panel-body">
												<h:commandButton class="marginOneEm btn btn-success"
													value="#{msgs.signTimesheet}" id="signTimesheet" action="#{timesheetController.signTimesheet()}"  />
												<h:commandButton class=" marginOneEm btn btn-success"
													value="#{msgs.save}" id="saveTimesheet"
													action="#{editTimesheetController.saveTimesheet}" />
												<ui:fragment>
													<h:commandButton class="marginOneEm btn btn-info"
														value="#{msgs.approve}" id="approveTimesheet" />
													<h:commandButton class="marginOneEm btn btn-danger"
														value="#{msgs.revision}" id="revisionTimesheet" />
												</ui:fragment>
											</div>
											<!-- Table -->
											<table class="table">
												

												<tr class="row">
													<td class="col-md-2"><h:outputLabel
															value="#{msgs.weekNo}" /></td>
													<td class="col-md-2"><h:outputLabel
															value="#{msgs.weekEnding}" /></td>
													<td class="col-md-2"><h:outputLabel
															value="#{msgs.total}" /></td>
													<td class="col-md-2"><h:outputLabel
															value="#{msgs.overtime}" /></td>
													<td class="col-md-3"><h:outputLabel
															value="#{msgs.flextime}" /></td>
												</tr>
												<tr class="row">
													<td class="col-md-2"><h:outputText
															value="#{editTimesheetController.weekNumber}" /></td>
													<td class="col-md-2"><h:outputText
															value="#{editTimesheetController.weekEnding}" /></td>
													<td class="col-md-2"><h:outputText id="sheetTotal"
															value="#{editTimesheetController.totalHours}" /></td>
													<td class="col-md-2" id="sheetOT"><h:outputText
															value="" /></td>
													<td class="col-md-3" id="sheetFLEX"><h:outputText
															value="" /></td>
												</tr>

											</table>
										</div>
									</div>
									<!-- /row of timesheet summary -->

									<div class="row">
										<div class="col-md-12">
											<p:dataTable var="tsRow"
												value="#{editTimesheetController.timesheet.timesheetRows}"
												cellpadding="0" cellspacing="0" editable="true"
												editMode="cell">
												<div class="row">
													<p:column class="wpCol" headerText="#{msgs.selectWP}" style="width:8em;">
														<p:cellEditor >
															<f:facet name="output">
																<h:outputText value="#{tsRow.workPackage.packageNum}" />
																<h:message for="packageSelect" errorClass="errorClass"/>
															</f:facet>

															<f:facet name="input">
																<p:selectOneMenu id="packageSelect"
																	value="#{tsRow.workPackage.id}" required="true">
																	<f:selectItem 
																		itemLabel="#{msgs.selectWP}"
																		noSelectOption="true" />
																	<f:selectItems  id="packageItem"
																		value="#{workPackageController.myWorkPackages}"
																		var="package" itemValue="#{package.id}"
																		itemLabel="#{package.project.id}:#{package.packageNum}" />
																	<f:validator validatorId="ca.bcit.pms.util.WorkPackageValidator" />
																</p:selectOneMenu>
															</f:facet>
														</p:cellEditor>
													</p:column>

													<p:column class="headerCol" headerText="#{msgs.total}">
														<p:cellEditor>
															<f:facet name="output">
																<h:outputText id="rowTotal" value="#{tsRow.totalHours}" />
															</f:facet>
															<f:facet name="input">
																<p:inputText value="#{tsRow.totalHours}" />
															</f:facet>
														</p:cellEditor>
													</p:column>

													<p:column class="headerCol" headerText="#{msgs.sun}">
														<p:cellEditor>
															<f:facet name="output">
																<h:outputText value="#{tsRow.sundayHour}" />
															</f:facet>
															<f:facet name="input">
																<p:inputText value="#{tsRow.sundayHour}">
																	<f:ajax render="rowTotal" />
																</p:inputText>
															</f:facet>
														</p:cellEditor>
													</p:column>

													<p:column class="headerCol" headerText="#{msgs.mon}">
														<p:cellEditor>
															<f:facet name="output">
																<h:outputText value="#{tsRow.mondayHour}" />
															</f:facet>
															<f:facet name="input">
																<p:inputText value="#{tsRow.mondayHour}">
																	<f:ajax render="rowTotal" />
																</p:inputText>
															</f:facet>
														</p:cellEditor>
													</p:column>

													<p:column class="headerCol" headerText="#{msgs.tue}">
														<p:cellEditor>
															<f:facet name="output">
																<h:outputText value="#{tsRow.tuesdayHour}" />
															</f:facet>
															<f:facet name="input">
																<p:inputText value="#{tsRow.tuesdayHour}">
																	<f:ajax render="rowTotal" />
																</p:inputText>
															</f:facet>
														</p:cellEditor>
													</p:column>

													<p:column class="headerCol" headerText="#{msgs.wed}">
														<p:cellEditor>
															<f:facet name="output">
																<h:outputText value="#{tsRow.wednesdayHour}" />
															</f:facet>
															<f:facet name="input">
																<p:inputText value="#{tsRow.wednesdayHour}">
																	<f:ajax render="rowTotal" />
																</p:inputText>
															</f:facet>
														</p:cellEditor>
													</p:column>

													<p:column class="headerCol" headerText="#{msgs.thu}">
														<p:cellEditor>
															<f:facet name="output">
																<h:outputText value="#{tsRow.thursdayHour}" />
															</f:facet>
															<f:facet name="input">
																<p:inputText value="#{tsRow.thursdayHour}">
																	<f:ajax render="rowTotal" />
																</p:inputText>
															</f:facet>
														</p:cellEditor>
													</p:column>

													<p:column class="headerCol" headerText="#{msgs.fri}">
														<p:cellEditor>
															<f:facet name="output">
																<h:outputText value="#{tsRow.fridayHour}" />
															</f:facet>
															<f:facet name="input">
																<p:inputText value="#{tsRow.fridayHour}">
																	<f:ajax render="rowTotal" />
																</p:inputText>
															</f:facet>
														</p:cellEditor>
													</p:column>

													<p:column class="headerCol" headerText="#{msgs.sat}">
														<p:cellEditor>
															<f:facet name="output">
																<h:outputText value="#{tsRow.saturdayHour}" />
															</f:facet>
															<f:facet name="input">
																<p:inputText value="#{tsRow.saturdayHour}">
																	<f:ajax render="rowTotal" />
																</p:inputText>
															</f:facet>
														</p:cellEditor>
													</p:column>

													<p:column class="notesCol" headerText="#{msgs.notes}" style="width:8em;">
														<p:cellEditor>
															<f:facet name="output">
																<h:outputText value="#{tsRow.notes}" />
															</f:facet>

															<f:facet name="input">
																<p:inputTextarea value="#{tsRow.notes}" rows="1"
																	cols="10" />
															</f:facet>
														</p:cellEditor>
													</p:column>

													<p:column class="editCol" headerText="" style="width:4em;">
														<h:commandButton class="btn btn-danger removeBtn"
															id="removeRow" value="#{msgs.removeRow}"
															action="#{editTimesheetController.removeRowFromTimesheet(tsRow)}" />
													</p:column>
												</div>
											</p:dataTable>
											<h:commandButton class="marginOneEm btn" id="addRow"
												value="#{msgs.addRow}"
												action="#{editTimesheetController.addTimesheetRow}" />
											<!-- /timesheetForm -->
										</div>
										<!-- /col timesheet -->
									</div>
									<!-- /row timesheet -->
								</h:form>
							</div>
							<!-- /container -->
						</div>
					</div>
				</div>
			</div>
		</ui:define>
		<!-- end of wrapper -->
	</ui:composition>

</h:body>
<!-- end of body -->
</html>
